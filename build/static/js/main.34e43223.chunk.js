(this["webpackJsonpgoit-react-hw-06-phonebook"]=this["webpackJsonpgoit-react-hw-06-phonebook"]||[]).push([[3],{102:function(t,e,n){"use strict";n.r(e);var r,c=n(0),a=n.n(c),u=n(21),o=n.n(u),s=n(14),i=n(42),l=n(3),b=n(43),j=n.n(b),d=n(16),f=n(44),h=n.n(f),p=n(33),g=n(22),O=n(5),v=n(4),x=v.a.registerRequest,m=v.a.registerSuccess,k=v.a.registerError,C=v.a.logInSuccess,_=v.a.logInError,y=v.a.logoutSuccess,L=v.a.getCurrentUserRequest,A=v.a.getCurrentUserSuccess,S=v.a.getCurrentUserError,U=Object(l.d)({name:"auth",initialState:{user:{name:"",email:""},token:"",isLoading:!1,isAuth:!1,error:null,isGetCurrentUser:!1},extraReducers:(r={},Object(O.a)(r,m,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isAuth=!0,t.error=null,t.isLoading=!1})),Object(O.a)(r,x,(function(t,e){t.isLoading=!0})),Object(O.a)(r,k,(function(t,e){t.error=e.payload,t.isLoading=!1})),Object(O.a)(r,C,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isAuth=!0})),Object(O.a)(r,_,(function(t,e){t.error=e.payload})),Object(O.a)(r,y,(function(t,e){t.user={name:"",email:""},t.token="",t.isAuth=!1,t.error=null})),Object(O.a)(r,L,(function(t){t.isGetCurrentUser=!1})),Object(O.a)(r,A,(function(t,e){var n=e.payload;t.user=n,t.isAuth=!0})),Object(O.a)(r,S,(function(t){t.isGetCurrentUser=!1})),r)}).reducer,R={key:"auth",storage:h.a,whitelist:["token"]},w=Object(d.g)(R,U),E=Object(l.a)({reducer:{contacts:p.b,auth:w},middleware:function(t){return t({serializableCheck:{ignoredActions:[d.a,d.e,d.b,d.f,d.c,d.d]}}).concat(j.a)},thunk:g.a,devTools:!1}),N=Object(d.h)(E),q=n(13),I=(n(80),n(20)),z=(n(81),n(2)),F=n(46),M=n.n(F),W=(n(100),n(23)),B=n.n(W),G=n(1),P=function(){return Object(G.jsxs)("nav",{children:[Object(G.jsx)(s.b,{to:"/",className:function(t){return t.isActive?B.a.activeLink:B.a.link},children:"Home"}),Object(G.jsx)(s.b,{to:"/contacts",className:function(t){return t.isActive?B.a.activeLink:B.a.link},children:"Phonebook"})]})},V=n(28),J=n(18),K=n.p+"static/media/user.96db366d.jpg",H=n(24),Q=n.n(H);function T(){var t=Object(q.b)(),e=Object(q.c)(J.c),n=K;return Object(G.jsxs)("div",{className:Q.a.container,children:[Object(G.jsx)("img",{src:n,alt:"avatar",width:"32",height:"32",className:Q.a.avatar}),Object(G.jsxs)("span",{className:Q.a.name,children:["Welcome,",e,"!"]}),Object(G.jsx)("button",{className:Q.a.button,type:"button",onClick:function(){t(Object(V.c)()),I.b.info("You logged out of your account !",{position:"top-center",autoClose:2500})},children:"Log out"})]})}var Y=n(25),D=n.n(Y);function X(){return Object(G.jsxs)("div",{children:[Object(G.jsx)(s.b,{to:"/register",className:function(t){return t.isActive?D.a.activeLink:D.a.link},children:"Registration"}),Object(G.jsx)(s.b,{to:"/login",className:function(t){return t.isActive?D.a.activeLink:D.a.link},children:"Login"})]})}var Z=n(47),$=n.n(Z);function tt(){var t=Object(q.c)(J.a);return Object(G.jsxs)("header",{className:$.a.header,children:[Object(G.jsx)(P,{}),t?Object(G.jsx)(T,{}):Object(G.jsx)(X,{})]})}function et(t){var e=t.isAuth,n=t.component;return Object(G.jsx)(G.Fragment,{children:e?Object(G.jsx)(n,{}):Object(G.jsx)(z.a,{to:"/login"})})}function nt(t){var e=t.isAuth,n=t.component;return Object(G.jsx)(G.Fragment,{children:e?Object(G.jsx)(z.a,{to:"/contacts"})&&Object(G.jsx)(n,{}):Object(G.jsx)(n,{})})}var rt=n(48),ct=n.n(rt);function at(t){var e=t.children;return Object(G.jsx)("div",{className:ct.a.container,children:e})}var ut=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,115))})),ot=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,116))})),st=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,117))})),it=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,118))})),lt=function(){var t=Object(q.b)(),e=Object(q.c)(J.b),n=Object(q.c)(J.a);return Object(c.useEffect)((function(){t(Object(V.a)())}),[t]),!e&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(tt,{}),Object(G.jsx)(I.a,{}),Object(G.jsx)(at,{children:Object(G.jsx)(c.Suspense,{fallback:Object(G.jsx)(M.a,{}),children:Object(G.jsxs)(z.d,{children:[Object(G.jsx)(z.b,{path:"/",element:Object(G.jsx)(nt,{isAuth:n,component:ut})}),Object(G.jsx)(z.b,{path:"/contacts",element:Object(G.jsx)(et,{isAuth:n,component:it})}),Object(G.jsx)(z.b,{path:"/login",element:Object(G.jsx)(nt,{isAuth:n,component:st})}),Object(G.jsx)(z.b,{path:"/register",element:Object(G.jsx)(nt,{isAuth:n,component:ot})})]})})})]})};o.a.render(Object(G.jsx)(a.a.StrictMode,{children:Object(G.jsx)(q.a,{store:E,children:Object(G.jsx)(i.a,{loading:Object(G.jsx)("h2",{children:"Wait,loading..."}),persistor:N,children:Object(G.jsx)(s.a,{children:Object(G.jsx)(lt,{})})})})}),document.getElementById("root"))},15:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchContacts",(function(){return h})),n.d(e,"addContact",(function(){return p})),n.d(e,"deleteContact",(function(){return g}));var r=n(9),c=n.n(r),a=n(17),u=n(3),o=n(12),s=n.n(o);function i(){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("/contacts");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.post("/contacts",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.delete("/contacts/".concat(e));case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s.a.defaults.baseURL="https://connections-api.herokuapp.com";var h=Object(u.c)("contacts/fetchContacts",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i();case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),p=Object(u.c)("contacts/addContact",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,b(e);case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),g=Object(u.c)("contacts/deleteContact",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,d(e);case 4:return t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}())},18:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return u}));var r=function(t){return t.auth.isAuth},c=function(t){return t.auth.user.name},a=function(t){return t.auth.isGetCurrentUser},u=function(t){return t.auth.error}},23:function(t,e,n){t.exports={link:"Navigation_link__3nKxS",activeLink:"Navigation_activeLink__LJoVl Navigation_link__3nKxS"}},24:function(t,e,n){t.exports={container:"UserMenu_container__32cjC",avatar:"UserMenu_avatar__2Ripq",name:"UserMenu_name__3U9Ps",button:"UserMenu_button__3k-h9"}},25:function(t,e,n){t.exports={link:"AuthNav_link__34s-z",activeLink:"AuthNav_activeLink__3iQid AuthNav_link__34s-z"}},28:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return j}));var r=n(12),c=n.n(r),a=n(20),u=n(4);c.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=function(t){c.a.defaults.headers.common.Authorization="Bearer ".concat(t)},s=function(){c.a.defaults.headers.common.Authorization=""},i=function(t){return function(e){e(u.a.registerRequest()),c.a.post("/users/signup",t).then((function(t){o(t.data.token),e(u.a.registerSuccess(t.data))})).catch((function(t){e(u.a.registerError(t.message))}))}},l=function(t){return function(e){e(u.a.logInRequest()),c.a.post("/users/login",t).then((function(t){o(t.data.token),e(u.a.logInSuccess(t.data))})).catch((function(t){e(u.a.logInError(t.message)),a.b.error(t.message)}))}},b=function(){return function(t,e){var n=e().auth.token;n&&(o(n),t(u.a.getCurrentUserRequest()),c.a.get("/users/current").then((function(e){var n=e.data;return t(u.a.getCurrentUserSuccess(n))})).catch((function(t){return u.a.getCurrentUserError(t)})))}},j=function(){return function(t){t(u.a.logoutRequest()),c.a.post("/users/logout").then((function(){s(),t(u.a.logoutSuccess())})).catch((function(e){return t(u.a.logoutError(e))}))}}},33:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,c=n(5),a=n(15),u=n(3),o=Object(u.d)({name:"phoneBook",initialState:{contacts:[],isLoading:!1,filter:""},reducers:{changeFilter:function(t,e){t.filter=e.payload}},extraReducers:(r={},Object(c.a)(r,a.fetchContacts.fulfilled,(function(t,e){t.contacts=e.payload,t.isLoading=!1,t.error=null})),Object(c.a)(r,a.fetchContacts.pending,(function(t){t.isLoading=!0,t.error=null})),Object(c.a)(r,a.fetchContacts.rejected,(function(t,e){t.isLoading=!1,t.error=e.payload})),Object(c.a)(r,a.addContact.fulfilled,(function(t,e){t.contacts.push(e.payload),t.isLoading=!1,t.error=null})),Object(c.a)(r,a.addContact.pending,(function(t){t.isLoading=!0,t.error=null})),Object(c.a)(r,a.addContact.rejected,(function(t,e){t.isLoading=!1,t.error=e.payload,console.log(e.payload)})),Object(c.a)(r,a.deleteContact.fulfilled,(function(t,e){t.contacts=t.contacts.filter((function(t){return t.id!==e.payload})),t.isLoading=!1,t.error=null})),Object(c.a)(r,a.deleteContact.pending,(function(t){t.isLoading=!0,t.error=null})),Object(c.a)(r,a.deleteContact.rejected,(function(t,e){t.isLoading=!1,t.error=e.payload})),r)});e.b=o.reducer;var s=o.actions.changeFilter},4:function(t,e,n){"use strict";var r=n(3),c={registerRequest:Object(r.b)("auth/registerRequest"),registerSuccess:Object(r.b)("auth/registerSuccess"),registerError:Object(r.b)("auth/registerError"),logInRequest:Object(r.b)("auth/logInRequest"),logInSuccess:Object(r.b)("auth/logInSuccess"),logInError:Object(r.b)("auth/logInError"),logoutRequest:Object(r.b)("auth/logoutRequest"),logoutSuccess:Object(r.b)("auth/logoutSuccess"),logoutError:Object(r.b)("auth/logoutError"),getCurrentUserRequest:Object(r.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(r.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(r.b)("auth/getCurrentUserError")};e.a=c},47:function(t,e,n){t.exports={header:"AppBar_header__oS1-i"}},48:function(t,e,n){t.exports={container:"Container_container__NkA0d"}},80:function(t,e,n){}},[[102,6,7]]]);
//# sourceMappingURL=main.34e43223.chunk.js.map